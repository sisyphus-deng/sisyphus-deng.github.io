[{"title":"Use Dropbox Hosting Figures","url":"/2018/06/27/Holder/","content":"# Purpose\nDropbox is one of the best online storage service. However, the shared link can't direct embedded to my blog. Below is the example.\n\n![https://www.dropbox.com/s/f6f7q96aqu4iv95/download.jpeg?dl=0](https://www.dropbox.com/s/f6f7q96aqu4iv95/download.jpeg?dl=0)\n\nActually, replace `www.dropbox.com` with `dl.dropboxusercontent.com` can simply fix this problem.\n\n![https://dl.dropboxusercontent.com/s/f6f7q96aqu4iv95/download.jpeg?dl=0](https://dl.dropboxusercontent.com/s/f6f7q96aqu4iv95/download.jpeg?dl=0)\n\nFor great firewall reason, friends in China may need use \"dropbox.ubuntuhot.com\". Credit to [UbuntuHot](https://www.ubuntuhot.com/posts/use-dropbox-images-hosting.html).\n\n![https://dropbox.ubuntuhot.com/s/f6f7q96aqu4iv95/download.jpeg?dl=0](https://dropbox.ubuntuhot.com/s/f6f7q96aqu4iv95/download.jpeg?dl=0)\n\nHere I make a generate/retrieve shared dropbox files' links from selected files in Finder and put the converted links in the clipper board, because I uses MarkDown, so that I also put it in MarkDown's picture format.\n\n# Installation\nOpen Automator and select New Document at the left lower corner of the pop window. Then choose Service.\n\nService receives selected --> `image file` in --> `Finder`\n\n![](https://dl.dropboxusercontent.com/s/x8d6s4by7ffszna/Jietu20180627-200445.jpg?dl=0)\n\nAt left side in Actions tab, search `Run Shell Script` and drag it to right. On the upper left corner of the action, Shell --> `/bin/python`. On the upper right corner of the action, Pass input --> `as arguments`. Then copy and paste codes below.\n\n![](https://dl.dropboxusercontent.com/s/ky92l522uhre42p/Jietu20180627-211100.jpg?dl=0)\n\nRemember to change the Dropbox token, which can be applied from [Dropbox's developer page](https://www.dropbox.com/developers).\n{% gist dbf747861da7f453e7aa16ac545bcaac %}\n\nThen from action find, drag and drop `Copy to Clipboard` to the bottom. Name and save this service.\n![](https://dl.dropboxusercontent.com/s/3qi9u059h4lfmc9/Jietu20180627-211618.jpg?dl=0)\n\n# Optional\nI assigned it to my `caps lock + C`. Of cause, some work is needed to modify the function of `caps lock`. I may talk about it someday. \n","tags":["MacOS"]},{"title":"IHG PointBreaks (3) Mark on Google Map","url":"/2018/06/27/IHG-PointBreaks-3-Mark-on-Google-Map/","content":"After you got the csv file out put from the python code, you can mark those hotels in on [Google My Maps](https://www.google.com/mymaps). After create a new map and name it, you can upload the CSV file you got. ","tags":["IHG"],"categories":["Travel"]},{"title":"IHG PointBreaks (2) Parsing hotels information","url":"/2018/06/27/IHG-PointBreaks-2-Tech-Issues-Parsing-and-Google-Map/","content":"I posted the IHG PointBreaks Map days ago. Here is how I got it. As a small entry level examples of HTML parsing with [request-HTML](https://html.python-requests.org/).\n\nI used to use [beautifulsoup](https://www.crummy.com/software/BeautifulSoup/?) to parse response from [requests](http://docs.python-requests.org/en/master/). However, later I found CSS selector is very easy use and the CSS selector is not very to use. Web driver from selenium is too heavy. Then I found [request-HTML](https://html.python-requests.org/), I think it from the same developer of  [requests](http://docs.python-requests.org/en/master/). However, the project seems already dead. It shows build falling and last commit is months ago. Fortunately, it still useable. \n\nThere are some good feature of this package. For example,\n\n- Support JavaScript: `HTML.render()`\n- Support CSS selector as I mentioned: `HTML.find('YOUR CSS SELECTOR')`\n- Some handy and useful method, such as\n\n    - search with text by pattern: `HTML.search('What you want to {parse} in the page')`\n    - extract all links: `HTML.links`\n    - Intelligent pagination\n\n```python\n>>> r = sess.get('https://blog.github.com/')\n>>> count = 0\n>>> for html in r.html:\n...     print(html)\n...     count += 1\n...     if count == 5: break\n...\n<HTML url='https://blog.github.com/'>\n<HTML url='https://blog.github.com/page/2/'>\n<HTML url='https://blog.github.com/page/3/'>\n<HTML url='https://blog.github.com/page/4/'>\n<HTML url='https://blog.github.com/page/5/'>\n```\nThere is my code to parse hotels information from the PointBreaks webpage.the \n{% gist a5d1f3108099a7ed5bc1b8982173d25d pointbreaks_brief.py %}\n\nActually, I also parsed the address of each hotel from there webpage,.but later I found it was redundant. Only use hotels' names google map can find them precisely. \n```python\nfor i,row in tqdm(result_df.iterrows(),total = result_df.shape[0]):\n        r = sess.get(row['url'])\n        print(i)\n        try:\n            result_df.loc[i,'address'] = r.html.find('[itemprop=address]',first=True).text.replace(\"\\n\",\",\")\n        except AttributeError:\n            continue\n```\n\n","tags":["request-HTML"],"categories":["Travel"]},{"title":"Use NetEaseMusic (网易云音乐) oversea","url":"/2018/06/26/Use-NetEaseMusic-oversea/","content":"I happen to found a proxy for NetEaseMusic on GitHub. Thanks to [fengjueming](https://github.com/fengjueming/unblock-NetEaseMusic).\n\nInstall\n```bash\nbrew cask install neteasemusic\n```\n\nIt seems echo do not work on /etc/host even with sudo. You need to open it with `sudo vim \\etc\\hosts` or other editor. Then copy the line below to the file.\n```\n158.199.142.239 music.163.com p1.music.126.net p2.music.126.net p3.music.126.net p4.music.126.net\n\n```\n\n","tags":["Unblock"],"categories":["Misc"]},{"title":"Install MacOS/Hackintosh on a HP 17-x173dx laptop (2)","url":"/2018/06/26/Install-MacOS-Hackintosh-on-a-HP-17-x173dx-laptop-2/","content":"After install the system and some must have apps, I leave the computer on overnight to sync dropbox. However, in the morning, I found the fan was always at the max speed. In activity monitor, the kernel_task occupy 100% of a single CPU thread. I did some research, and [kresbeatz's post on tonymacx86](https://www.tonymacx86.com/threads/solved-kernel_task-high-cpu-after-15-mins-of-idle-time.221648/) gives a solution. \n\nBriefly, remove the `com.apple.mediaanalysisd.plist` and reboot. \n```bash\nsudo mv /System/Library/LaunchAgents/com.apple.mediaanalysisd.plist ~/backup/\n```\nWork like a charm.\nI have no idea what's the function of it. Looks like some daemon monitor the \"meida\", maybe some videos? I found it is not only cause CPU panic on Hackintosh but also 'authentic' MacOS. \n\n\n","tags":["mediaanalysisd"],"categories":["Install and Maintain Hackintosh"]},{"title":"MUST HAVE APP/SETUP when you have a new Mac (1)","url":"/2018/06/26/MUST-HAVE-APP-SETUP-when-you-have-a-new-Mac-1/","content":"Softwares can be get from offical app store and developer's website. Using Brew/cask can deal with most cases in the later source.\n\n# App Store\n- Agenda\n- OmniGraffle\n- Microsoft Remote Desktop 10\n- 1 Check\n- ForkLift\n- Sogou input\n- OmniFocus\n- Youdao\n- Be Focus\n- GIF Brewery\n- Pocket\n- Xcode\n- Evernote\n- Unarchiver\n- 1password\n- Paper\n- Dr clean (maybe also the dr antivirus)\n- 快帆\n\n\n# Brew/Cask\nTo install Brew\n```bash\n/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n```\n\nTo search brew or cask.\n```bash\nbrew search xxx\nbrew cask search xxx\n```\n\nOccasionally, you need to update and clean up old packages.\n```bash\nbrew update && brew cleanup\n```\n\n# Must-Haves under brew/cask\n{% gist e63d3778cda7d98a85387c15028eacb8 %}\n\n","tags":["App"],"categories":["MacOS"]},{"title":"IHG PointBreaks (1) April 30, 2018 - July 31, 2018","url":"/2018/06/25/IHG-PointBreaks-IHG-PointBreaks-April-30-2018-July-31-2018/","content":"IHG PointBreaks is promotion by IHG. Originally, every participated hotel needed 5000 points per night. Recently, they changed the program. Now, there were 3 tiers, just very few of them can be redeemed at 5000 points. But you have some chances to redeem 15000 points on higher tiers. \n\n<iframe src=\"https://www.google.com/maps/d/embed?mid=13CorO5Ld3BWFWaeU4G9oxAYrL_cl73-s\" width=\"640\" height=\"480\"></iframe>\n\nI will have a technical post to show how I did this. It can be a simple example about webpage parsing using the request-HTML package and how to use my map service from Google.\n\n\n","tags":["Resource"],"categories":["Travel"]},{"title":"View Html in Jupyter Notebook","url":"/2018/06/25/View-html-in-jupyter/","content":"\nWhen I use [requests](http://docs.python-requests.org/en/master/), I was a little inconvient to check the result of `requests.get()`. I used to generated a tmp.html to see it. Recently, I moved to jupyter notebook. By the way, jupyter notebook is really good tools for data science/bioinformatic reseraches. There is a easy way to show the `requests.get()' result in jupyter notebook.\n\n\n{% gist b3d922868e978cb965f67f0af1e734a8 %}\n\n[//]: # (<script text='text/javascript' src='/Users/nandeng/sisyphus-deng.github.io/node_modules/jquery/dist/jquery.js'></script>\n{% asset_jupyter /Users/nandeng/anaconda/bin/python request_show_example.ipynb %})\n\nHere is an example.\n![A HTML example in Jupyter Notebook](https://dropbox.ubuntuhot.com/s/0c39jc0ld4prjtg/Screenshot%202018-06-25%2014.58.46.png?dl=0)\n\nThen you can directly use the inspection tools of chrome or firefox on the html.\n\n","tags":["Python"],"categories":["Programming"]},{"title":"Install MacOS/Hackintosh on a HP 17-x173dx laptop (1)","url":"/2018/06/24/Install-MacOS-on-HP-17-x173dx-1/","content":"\n# Preface\n When I come to US 10 years ago, my PhD supervisor was a big fan of Apple. All the computers in the lab is Mac. Since then, I was used to MacOS and already setup a  productive pipeline for my daily use. Also, I have paid some on softwares, such as Alfred, omniGraffle, omniFocus, etc. I think windows 10 is also great OS, however, for me it was too time-consuming to switch back to windows.\n\nRecently, I feel 8gb+256gb of my MacBook Pro MF840 (Retina, early 2015) is not enough for me and MacBook Pro is very hard and expensive to update. I planned to by a Mac mini. While I am waiting for a deal, I found this HP 17-x173dx in my storage room. I bought it last year at best buy, just because it was cheap, but I have never used it. After I briefly checked the specs, it might be great for Hackintosh.\n\nActually, I am not familiar with Hackintosh, and my purpose is easy -- build up a MacOS workstation at home. Thus, I didn't make everything working today. \n\n# Not working\n- Wireless\n\t- Realtek RTK8188EE\n\t- There is no support for Realtek yet\n\t- I used is as a desktop so that it is not a big deal. Maybe fix it with BT4.0 later.\n- Camera\n- Audio\n\t- Partially works \n\t- The max volume is a little low\n\t- It does not auto switch to headphone when plugged\n\t- The voodooDdaSettingsLoader has some permission problems\n\n# [Specs](https://support.hp.com/us-en/document/c05447632)\n* i7-7500U\n* 8 GB DDR4\n* Intel HD Graphics 620\n* Samsung EVO 850 1 TB \n\t* It comes a 1 TB Blue disk 5400rpm.\n\t* I am planing buy a hard drive caddy and put the old hard drive for larger\n* 17.3'' HD+ LED (1600 x 900)\n\nWe need determine some details of the computer.  I used a USB drive with live linux to do this (Maybe it can be done in windows but I am not familiar with windows and I happen to have a [Manjaro](https://manjaro.org/get-manjaro/) as live linux drive burned by [etcher](https://etcher.io/) . Then start linux on the computer. Open a terminal and input commands below.\n\nCheck information about audio, wireless, graphics...\n```bash\nlspci -nn\n```\nCheck keyboard and trackpad information\n```bash\ncat /proc/bus/input/devices\n# Or for shorter\ncat /proc/bus/input/devices|grep name\n```\nWe found more details, so that we can download kext (driver) later.\n- [x] Ethernet RLT8101/2/6E, there is a drive.\n- [ ]Wireless RLT8188EE\n- [x]Sound card was Intel Sunrise Point-LP HD Audio\n- [x] PS/2 trackpad and keyboard\n\n\n# Process\nBasically, follow the [installation guide on tonymax86](https://www.tonymacx86.com/threads/unibeast-install-macos-high-sierra-on-any-supported-intel-based-pc.235474/). We need a USB drive (>16gb) and a set of USB keyboard/mouse, before we install the PS/2 drive we can't use the keyboard and trackpad on the laptop.\n1. Download High Sierra from App Store\n2. Format the USB driver\nUsing command line can prevent some GUID problems, especially the usb drive was formatted and used in windows or other system before.\n```bash\n# Find your driver\ndiskutil list\n# Say your driver is disk3, format the driver to HFS and named as MacOS.\ndiskutil eraseDisk HFS+ MacOS GPT /dev/disk3\n```\n3. Download [UniBeast](https://www.tonymacx86.com/resources/categories/tonymacx86-downloads.3/) and run it, I got [UniBeast 8.3.2](https://www.tonymacx86.com/resources/unibeast-8-3-2.383/) on 06/24/18. UniBeast will created a installation disk for you.\n3.0 You need a tonymacx account to download it. \n3.1 I selected UEFI Boot Mode.\n3.2 Don't select anything Graphics Configuration.\n3.3 Maybe take 10-20mins to get it done.\n4. Copy [MultiBeast](https://www.tonymacx86.com/resources/categories/tonymacx86-downloads.3/), [KextBeast](https://www.tonymacx86.com/resources/categories/other-archive.9/), [EFI Mounter](https://www.tonymacx86.com/resources/categories/other-archive.9/), [RealtekRTL8100 driver](https://www.insanelymac.com/forum/files/file/259-realtekrtl8100-binary/), [Voodoo PS/2 controller driver](https://github.com/RehabMan/OS-X-Voodoo-PS2-Controller) to the USB drive.\n4.1 MultiBeast will install the bootload and drivers for you after your Hackintosh installed. I got [MultiBeast 8.3.2](https://www.tonymacx86.com/resources/multibeast-high-sierra-10-3-0.388/) on 06/24/18. \n4.2 KextBeast is a kext installer. I got [KextBeast](https://www.tonymacx86.com/resources/kextbeast.32/) on 06/24/18.\n4.3 EFI Mounter will mount EFI drive and we can edit the clover config. I got [EFI Mounter 3](https://www.tonymacx86.com/resources/efi-mounter-v3.280/) on 06/24/18.\n4.4 I got [RealtekRTL8100 driver 2.0.0](https://www.insanelymac.com/forum/files/file/259-realtekrtl8100-binary/) on 06/24/18. \n4.5 I got [Voodoo PS/2 controller driver](https://bitbucket.org/RehabMan/os-x-voodoo-ps2-controller/downloads/RehabMan-Voodoo-2018-0506.zip)  on 06/24/18.\n5. Get into BIOS by pressing F10 while booting. \n5.1 Disable security start up.\n5.2 Disable Virtualization Technology\n5.3 Disable CFG\n6. Start the installation with usb drive.\n7. You may need to format the hard drive.\n```bash\n# Find your driver, again.\ndiskutil list\n# In most case, your driver is disk0, format the driver to HFS and named as MacOS.\ndiskutil eraseDisk HFS+ MacOS GPT /dev/disk0\n```\n8. Then install the OS. There were several restarts during installation.\n9. After installation, restart the machine with USB and add option `-disablegfxfirmware`. That will prevent the grey screen during restart. \n10. Run the MultiBeast. Select UEFI and in the drive tap select the latest version of VoodooHDA. I got 2.9.0 in 06/24/18.\n11. Run EFI Mounter 3. Then get edit the clover `/EFI/CLOVER/config.plist`. Change the Intel video injection to false. (This is confusing. I found when this is on. OS can't be started.)\n12. Install the RealtekRTL8100 driver with with KextBeast.\n13. Install the VoodooPS2Controller.kext with KextBeast and copy the VoodooPS2Daemon in the folder to `/usr/bin`\n14. Restart. All DONE!!!\n\n# Todo\n- Repair the voodooDdaSettingsLoader problem\n- Add BT4.0 and repair the wireless\n\t- The orgianl wireless card looks like a M.2 card but some documents show it was half pci-e.\n\t-  There are some cards shows compatible. \n\t\t- half pci-e: BCM943224HMP\n\t\t- M.2 / NGFF: BCM94352Z\n","tags":["HP"],"categories":["Install and Maintain Hackintosh"]},{"title":"Start script for deploy a centOS with XFCE on Vultr","url":"/2018/06/21/vultr_starup/","content":"Those codes is to deploy a xfce4 desktop environment on centOS. I tested in vultr, but it should work on any machine.\n{% gist 3f8cd7eaa654f1fa2f4da7288162f96a vultr_startup_xfce4.sh %}\n","tags":["vultr"],"categories":["Misc"]}]